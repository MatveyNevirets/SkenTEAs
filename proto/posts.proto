syntax="proto3";

service PostsRpc {
    rpc InsertPost(PostDto) returns (ResponseDto);
    rpc DeletePost(PostDto) returns (ResponseDto);

    rpc FetchUserPosts (RequestDto) returns (ListPostsDto);
    rpc FetchPosts (RequestDto) returns (ListPostsDto);

    rpc CommentPost(CommentDto) returns (ResponseDto);
    rpc FetchPostComments(PostDto) returns (ListCommentsDto);
    
    rpc LikePost(PostDto) returns (ResponseDto);
}

message ListPostsDto {
    repeated PostDto posts = 1;
    repeated LikedPostsDto likedPosts = 2;
}

message ListCommentsDto {
    repeated CommentDto comments = 1;
}

message LikedPostsDto {
    string post_id = 1;
}

message PostDto {
    string id = 1;
    string author_id = 2;
    string title = 3;
    string description = 4;
    string image_path = 5;
    string likes = 6;
    string author_username = 7;
}

message RequestDto {
}

message ResponseDto {
    string message = 1;
}

message CommentDto {
    string id = 1;
    string author_id = 2;
    string post_id = 3;
    string message = 4;
    string author_username = 5;
}
